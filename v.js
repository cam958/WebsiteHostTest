/*! OpenVV 02-02-2020 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).OpenVV=e()}}(function(){return function o(s,a,u){function c(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return c(t||e)},r,r.exports,o,s,a,u)}return a[n].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var i,r=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=0;i<r;i++)if(t.call(n,e[i],i,e))return e[i]}},{}],2:[function(e,t,n){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}})},{}],3:[function(e,t,n){!function(v,m){"use strict";if(!("IntersectionObserver"in v&&"IntersectionObserverEntry"in v&&"intersectionRatio"in v.IntersectionObserverEntry.prototype)){var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(n(v,"resize",this._checkForIntersections,!0),n(m,"scroll",this._checkForIntersections,!0),"MutationObserver"in v&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(m,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,i(v,"resize",this._checkForIntersections,!0),i(m,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var a=this._rootIsInDom(),u=a?this._getRootRect():o();this._observationTargets.forEach(function(e){var t=e.element,n=y(t),i=this._rootContainsTarget(t),r=e.entry,o=a&&i&&this._computeTargetAndRootIntersection(t,u),s=e.entry=new c({time:v.performance&&performance.now&&performance.now(),target:t,boundingClientRect:n,rootBounds:u,intersectionRect:o});r?a&&i?this._hasCrossedThreshold(r,s)&&this._queuedEntries.push(s):r&&r.isIntersecting&&this._queuedEntries.push(s):this._queuedEntries.push(s)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=v.getComputedStyle(e).display){for(var n,i,r,o,s,a,u,c,l=y(e),h=b(e),f=!1;!f;){var d=null,p=1==h.nodeType?v.getComputedStyle(h):{};if("none"==p.display)return;if(h==this.root||h==m?(f=!0,d=t):h!=m.body&&h!=m.documentElement&&"visible"!=p.overflow&&(d=y(h)),d&&(n=d,i=l,0,r=Math.max(n.top,i.top),o=Math.min(n.bottom,i.bottom),s=Math.max(n.left,i.left),a=Math.min(n.right,i.right),c=o-r,!(l=0<=(u=a-s)&&0<=c&&{top:r,bottom:o,left:s,right:a,width:u,height:c})))break;h=b(h)}return l}},e.prototype._getRootRect=function(){var e;if(this.root)e=y(this.root);else{var t=m.documentElement,n=m.body;e={top:0,left:0,right:t.clientWidth||n.clientWidth,width:t.clientWidth||n.clientWidth,bottom:t.clientHeight||n.clientHeight,height:t.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(n){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?n.width:n.height)/100}),t={top:n.top-e[0],right:n.right+e[1],bottom:n.bottom+e[2],left:n.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},e.prototype._rootIsInDom=function(){return!this.root||r(m,this.root)},e.prototype._rootContainsTarget=function(e){return r(this.root||m,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},v.IntersectionObserver=e,v.IntersectionObserverEntry=c}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||o(),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?r/n:this.isIntersecting?1:0}function e(e,t){var n,i,r,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r=r||setTimeout(function(){n(),r=null},i)}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function n(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function y(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):o()}function o(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function r(e,t){for(var n=t;n;){if(n==e)return!0;n=b(n)}return!1}function b(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.getDetails=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{viewportWidth:Math.max(document.body.clientWidth,window.innerWidth)||-1,viewportHeight:Math.max(document.body.clientHeight,window.innerHeight)||-1,elementWidth:t.clientWidth||-1,elementHeight:t.clientHeight||-1,iframeContext:r(),focus:i()}};var i=n.isInFocus=function(){return("undefined"===document.hidden||!0!==document.hidden)&&(r()===o.CROSS_DOMAIN_IFRAME||(!window.document.hasFocus||window.top.document.hasFocus()))},r=n.iFrameContext=function(){try{if(window.top===window)return o.ON_PAGE;for(var e=window;e.parent!==e;){if(e.parent.document.domain!==e.document.domain)return o.CROSS_DOMAIN_IFRAME;e=e.parent}return o.SAME_DOMAIN_IFRAME}catch(e){return o.CROSS_DOMAIN_IFRAME}},o=n.iFrameServingScenarios={ON_PAGE:"on page",SAME_DOMAIN_IFRAME:"same domain iframe",CROSS_DOMAIN_IFRAME:"cross domain iframe"}},{}],5:[function(e,t,n){"use strict";e("array-find"),e("ie-array-find-polyfill")},{"array-find":1,"ie-array-find-polyfill":2}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.validateStrategy=n.validateCriteria=n.validElement=n.validTechnique=void 0;var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("../Measurement/MeasurementTechniques/BaseTechnique"),s=(i=o)&&i.__esModule?i:{default:i};n.validTechnique=function(n){return"function"==typeof n&&Object.getOwnPropertyNames(s.default).reduce(function(e,t){return t&&r(n[e])===r(s.default[e])},!0)},n.validElement=function(e){return e&&-1<e.toString().indexOf("Element")};var a=n.validateCriteria=function(e){var t=e.inViewThreshold,n=e.timeInView,i=!1,r=[];return("number"!=typeof t||1<t)&&(i=!0,r.push("inViewThreshold must be a number equal to or less than 1")),("number"!=typeof n||n<0)&&(i=!0,r.push("timeInView must be a number greater to or equal 0")),{invalid:i,reasons:r.join(" | ")}};n.validateStrategy=function(e){var t=e.autostart,n=e.techniques,i=e.criteria,r=!1,o=[];"boolean"!=typeof t&&(r=!0,o.push("autostart must be boolean")),Array.isArray(n)&&0!==n.length||(r=!0,o.push("techniques must be an array containing atleast on measurement techniques"));var s=a(i);return s.invalid&&(r=!0,o.push(s.reasons)),{invalid:r,reasons:o.join(" | ")}}},{"../Measurement/MeasurementTechniques/BaseTechnique":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.START="start",n.STOP="stop",n.CHANGE="change",n.COMPLETE="complete",n.UNMEASUREABLE="unmeasureable",n.INVIEW="inview",n.OUTVIEW="outview"},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s,a=e("../Timing/InViewTimer"),u=(s=a)&&s.__esModule?s:{default:s},c=e("./Strategies/"),l=e("../Helpers/Validators"),h=d(e("../Environment/Environment")),f=d(e("./Events"));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var p=(i(v,[{key:"start",value:function(){this._technique.start()}},{key:"dispose",value:function(){this._technique&&this._technique.dispose(),this.timer&&this.timer.dispose()}},{key:"onViewableStart",value:function(e){return this._addCallback(e,f.START)}},{key:"onViewableStop",value:function(e){return this._addCallback(e,f.STOP)}},{key:"onViewableChange",value:function(e){return this._addCallback(e,f.CHANGE)}},{key:"onViewableComplete",value:function(e){return this._addCallback(e,f.COMPLETE),this.criteriaMet&&this._techniqueChange(f.COMPLETE,this._technique),this}},{key:"onUnmeasureable",value:function(e){return this._addCallback(e,f.UNMEASUREABLE),this.unmeasureable&&this._techniqueChange(f.UNMEASUREABLE),this}},{key:"_selectTechnique",value:function(e){return e.filter(l.validTechnique).map(this._instantiateTechnique.bind(this)).find(function(e){return!e.unmeasureable})}},{key:"_instantiateTechnique",value:function(e){return new e(this._element,this._strategy.criteria)}},{key:"_addSubscriptions",value:function(e){e&&(e.onInView(this._techniqueChange.bind(this,f.INVIEW,e)),e.onChangeView(this._techniqueChange.bind(this,f.CHANGE,e)),e.onOutView(this._techniqueChange.bind(this,f.OUTVIEW,e)))}},{key:"_techniqueChange",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},i=void 0,r=this._appendEnvironment(n);switch(e){case f.INVIEW:this._criteriaMet||(this.timer=new u.default(this._strategy.criteria.timeInView),this.timer.elapsed(this._timerElapsed.bind(this,n)),this.timer.start(),i=f.START);break;case f.CHANGE:i=e;break;case f.COMPLETE:this._criteriaMet||(this._criteriaMet=!0,i=e);break;case f.OUTVIEW:this._criteriaMet||(this.timer&&(this.timer.stop(),delete this.timer),i=f.STOP);break;case f.UNMEASUREABLE:i=f.UNMEASUREABLE}i&&this._publish(i,r)}},{key:"_publish",value:function(e,t){Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(e){return e(t)})}},{key:"_timerElapsed",value:function(e){this._techniqueChange(f.COMPLETE,e)}},{key:"_addCallback",value:function(e,t){if(this._listeners[t]&&"function"==typeof e)this._listeners[t].push(e);else if("function"!=typeof e)throw"Callback must be a function";return this}},{key:"_appendEnvironment",value:function(e){return r({},{percentViewable:void 0===e.percentViewable?-1:e.percentViewable,technique:e.techniqueName||-1,viewable:void 0===e.viewable?-1:e.viewable},h.getDetails(this._element))}},{key:"unmeasureable",get:function(){return!this._technique||this._technique.unmeasureable}}]),v);function v(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),this._listeners={start:[],stop:[],change:[],complete:[],unmeasureable:[]},this._element=e,this._strategy=r({},c.DEFAULT_STRATEGY,n);var i=(this._criteriaMet=!1,l.validateStrategy)(this._strategy);if(i.invalid)throw i.reasons;this._technique=this._selectTechnique(this._strategy.techniques),this._technique&&this._addSubscriptions(this._technique),this.unmeasureable?setTimeout(function(){return t._publish(f.UNMEASUREABLE,h.getDetails(t._element))},0):this._strategy.autostart&&this._technique.start()}n.default=p,t.exports=n.default},{"../Environment/Environment":4,"../Helpers/Validators":6,"../Timing/InViewTimer":16,"./Events":7,"./Strategies/":13}],9:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(o,[{key:"onInView",value:function(e){return this.addCallback(e,"inView")}},{key:"onChangeView",value:function(e){return this.addCallback(e,"changeView")}},{key:"onOutView",value:function(e){return this.addCallback(e,"outView")}},{key:"addCallback",value:function(e,t){if("function"==typeof e&&this.listeners[t])this.listeners[t].push(e);else if("function"!=typeof e)throw"callback must be function";return this}},{key:"start",value:function(){}},{key:"dispose",value:function(){}},{key:"unmeasureable",get:function(){return!1}},{key:"viewable",get:function(){return!1}},{key:"techniqueName",get:function(){return"BaseTechnique"}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.listeners={inView:[],outView:[],changeView:[]},this.percentViewable=0}n.default=r,t.exports=n.default},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,s=e("./BaseTechnique"),a=(o=s)&&o.__esModule?o:{default:o},u=e("../../Helpers/Validators"),c=e("../Strategies/");var l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(h,a.default),i(h,[{key:"start",value:function(){this.observer=new window.IntersectionObserver(this.viewableChange.bind(this),{threshold:this.notificationLevels}),this.observer.observe(this.element)}},{key:"dispose",value:function(){this.observer&&(this.observer.unobserve(element),this.observer.disconnect(element))}},{key:"viewableChange",value:function(e){e&&e.length&&void 0!==e[0].intersectionRatio&&(this.percentViewable=e[0].intersectionRatio,e[0].intersectionRatio<this.criteria.inViewThreshold&&this.started&&this.inView&&(this.inView=!1,this.listeners.outView.forEach(function(e){return e()})),e[0].intersectionRatio>=this.criteria.inViewThreshold&&!this.inView&&(this.started=!0,this.inView=!0,this.listeners.inView.forEach(function(e){return e()})),this.listeners.changeView.forEach(function(e){return e()}))}},{key:"unmeasureable",get:function(){return!window.IntersectionObserver||this.usesPolyfill||!(0,u.validElement)(this.element)}},{key:"viewable",get:function(){return this.inView}},{key:"techniqueName",get:function(){return"IntersectionObserver"}},{key:"usesPolyfill",get:function(){return"number"==typeof window.IntersectionObserver.prototype.THROTTLE_TIMEOUT}}]),h);function h(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:c.DEFAULT_STRATEGY.criteria;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e,t));if(void 0!==t&&e)n.element=e,n.criteria=t,n.inView=!1,n.started=!1,n.notificationLevels=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],-1===n.notificationLevels.indexOf(n.criteria.inViewThreshold)&&n.notificationLevels.push(n.criteria.inViewThreshold);else if(!e)throw"element not provided";return n}n.default=l,t.exports=n.default},{"../../Helpers/Validators":6,"../Strategies/":13,"./BaseTechnique":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=a(e("./IntersectionObserver")),s=(a(e("intersection-observer")),function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("../../Environment/Environment")));function a(e){return e&&e.__esModule?e:{default:e}}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,o.default),i(c,[{key:"unmeasureable",get:function(){return s.iFrameContext()===s.iFrameServingScenarios.CROSS_DOMAIN_IFRAME}},{key:"techniqueName",get:function(){return"IntersectionObserverPolyFill"}}]),c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}n.default=u,t.exports=n.default},{"../../Environment/Environment":4,"./IntersectionObserver":10,"intersection-observer":3}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("./IntersectionObserver");Object.defineProperty(n,"IntersectionObserver",{enumerable:!0,get:function(){return s(i).default}});var r=e("./IntersectionObserverPolyfill");Object.defineProperty(n,"IntersectionObserverPolyfill",{enumerable:!0,get:function(){return s(r).default}});var o=e("./BaseTechnique");function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"BaseTechnique",{enumerable:!0,get:function(){return s(o).default}})},{"./BaseTechnique":9,"./IntersectionObserver":10,"./IntersectionObserverPolyfill":11}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.StrategyFactory=n.DEFAULT_STRATEGY=void 0;var o=s(e("../../Helpers/Validators")),i=s(e("../MeasurementTechniques/")),r=s(e("../../Options/ViewabilityCriteria"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var a=n.DEFAULT_STRATEGY={autostart:!0,techniques:[i.IntersectionObserver,i.IntersectionObserverPolyfill],criteria:r.MRC_VIDEO};n.StrategyFactory=function(e,t,n){var i={autostart:0<arguments.length&&void 0!==e?e:a.autostart,techniques:1<arguments.length&&void 0!==t?t:a.techniques,criteria:2<arguments.length&&void 0!==n?n:a.criteria},r=o.validateStrategy(i);if(r.invalid)throw r.reasons;return i}},{"../../Helpers/Validators":6,"../../Options/ViewabilityCriteria":15,"../MeasurementTechniques/":12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e("./Helpers/Polyfills.js");var o=f(e("./Measurement/Events")),s=h(e("./Timing/InViewTimer")),a=f(e("./Measurement/Strategies/")),u=(f(e("./Environment/Environment")),h(e("./Measurement/MeasurementExecutor"))),c=f(e("./Options/ViewabilityCriteria")),l=f(e("./Measurement/MeasurementTechniques/"));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var d=(i(p,[{key:"measureElement",value:function(e,t){var n=new u.default(e,t);return this.executors.push(n),n}},{key:"dispose",value:function(){this.executors.forEach(function(e){return e.dispose()})}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.executors=[]}(n.default=d).ViewabilityCriteria=c,d.MeasurementExecutor=u.default,d.MeasurementTechniques=l,d.InViewTimer=s.default,d.Strategies=a,d.Events=o,t.exports=n.default},{"./Environment/Environment":4,"./Helpers/Polyfills.js":5,"./Measurement/Events":7,"./Measurement/MeasurementExecutor":8,"./Measurement/MeasurementTechniques/":12,"./Measurement/Strategies/":13,"./Options/ViewabilityCriteria":15,"./Timing/InViewTimer":16}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MRC_VIDEO={inViewThreshold:.5,timeInView:2e3},n.MRC_DISPLAY={inViewThreshold:.5,timeInView:1e3},n.customCriteria=function(e,t){return{inViewThreshold:0<arguments.length&&void 0!==e?e:.5,timeInView:1<arguments.length&&void 0!==t?t:2e3}}},{}],16:[function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(o,[{key:"timerComplete",value:function(){this.completed=!0,this.listeners.forEach(function(e){return e()})}},{key:"elapsed",value:function(e){"function"==typeof e&&this.listeners.push(e)}},{key:"start",value:function(){this.endTimer(),this.timer=setTimeout(this.timerComplete.bind(this),this.duration)}},{key:"stop",value:function(){this.endTimer()}},{key:"endTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.listeners.length=0)}},{key:"dispose",value:function(){this.endTimer()}}]),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.duration=e,this.listeners=[],this.completed=!1}n.default=r,t.exports=n.default},{}]},{},[14])(14)});


function getParams(script_name) {
    var scripts = document.getElementsByTagName("script");
    
    for(var i=0; i<scripts.length; i++) {
      if(scripts[i].src.indexOf("/" + script_name) > -1) {
  
        var pa = scripts[i].src.split("?").pop().split("&");
  
        var p = {};
        for(var j=0; j<pa.length; j++) {
          var kv = pa[j].split("=");
          p[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);
        }
        return p;
      }
    }
    
    return {};
  }

qs = getParams("v.js")

var openvv = new OpenVV(),
  element = document.getElementById('db-ad-wrapper'),
  techniques = [OpenVV.MeasurementTechniques.IntersectionObserver, OpenVV.MeasurementTechniques.IntersectionObserverPolyfill],
  autostart = true,
  criteria = OpenVV.ViewabilityCriteria.MRC_DISPLAY,
  viewabilityPixelFired = !1;
  
  function firePixel(type, qs, args) {
    var pixelUrl = "https://t.company-target.com/t/";
    pixelUrl = pixelUrl + type + "?";
    Object.keys(qs).forEach(function(key) { pixelUrl = pixelUrl + "&" + encodeURIComponent(key) + "=" + encodeURIComponent(qs[key]); });
    Object.keys(args).forEach(function(key) { pixelUrl = pixelUrl + "&" + encodeURIComponent("_" + key) + "=" + encodeURIComponent(args[key]); });
    viewabilityPixelFired || (document.createElement("img").src = pixelUrl, viewabilityPixelFired = !0)
  }
  
var strategy = OpenVV.Strategies.StrategyFactory(autostart, techniques, criteria);
openvv
  .measureElement(element, strategy)
  .onViewableComplete(function (args) {
      // element has been in view above the viewable threshold for atleast 2 continuous seconds
      console.log('Viewable Complete', new Date().toString(), args);
      qs["status"] = "view"
      firePixel("v", qs, args);
  })
  .onUnmeasureable(function (args) {
      // no measurement techniques were found that are capable of measuring in the current enviroment (browser + iframe context)
      console.log('Unmeasureable');
      qs["status"] = "unknown"
      firePixel("v", qs, args);q
  });

